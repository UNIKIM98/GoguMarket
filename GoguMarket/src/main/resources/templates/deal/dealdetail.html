<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://ultraq.net/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">

<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>중고거래상품 상세페이지1</title>
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">


<style>
@font-face {
	font-family: 'S-CoreDream-3Light';
	src:
		url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff')
		format('woff');
	font-weight: normal;
	font-style: normal;
}

* {
	font-family: 'S-CoreDream-3Light';
}
</style>
</head>

<body class="wide-layout">
	<div layout:fragment="content">
		<script th:inline="javascript">
		
			//판매자정보페이지로가게하기
			/* $(function() {
				$(".btnInfo").on("click", function() {
					
					// let url= dlno 위치; $(".btnInfo").closest("tr").children().first().text()
					let url = $(".single-product-info h3 a").text();
					//location.href="dealdetail/"+url
					location.href = `dealSellerpage/${url}`
					console.log(url); // 어디를 찍든 같은 dlno를 부를수 있도록 
				})
			})
			 */
			 
			
			// 판매자정보더보기 누르면 가는곳
			function seller() {

				// ❤ 판매자 id url로 보내기 
				/*<![CDATA[*/
				var ntslId = /*[[ ${deal.ntslId} ]]*/
				console.log(ntslId)
				/*]]*/

				location.href = `/goguma/dealSellerpage/${ntslId}`
			}

			// 수정하기 버튼 클릭스 수정폼으로 이동
			function updateform() {
				let dlno = $(".single-product-info a").first().text();
				location.href = `/my/dealupdate/${dlno}`
			}

			function deleteDeal() {
				let dlno = $(".single-product-info a").first().text();
				location.href = `/my/deleteDeal/${dlno}`

			}
			
			function gopage(page) {
				frmSearch.page.value = page;
				//frmSearch.submit();
			}
		</script>

		<hr>
		<!-- Body main wrapper start -->
		<div class="wrapper">
				<!-- SHOP SECTION START -->
				<div class="shop-section mb-80">
					<div class="container">
						<div class="row">
							<div class="col-lg-12">
								<!-- single-product-area start -->
								<div class="single-product-area mb-80">
									<div class="row">
										<!-- imgs-zoom-area start -->
										<div class="col-md-5">
											<div class="imgs-zoom-area">
												<img id="zoom_03" data-zoom-image="/img/product/6.jpg"
													alt="">
												<div class="row">
													<div class="col-lg-12">
														<div id="gallery_01"
															class="carousel-btn slick-arrow-3 mt-30">
															<div th:each="f : ${file}" class="p-c">
																<a href="#" data-image="/img/product/2.jpg"
																	data-zoom-image="/img/product/2.jpg"> <img
																	th:src="${f.atchPath}" alt="">
																</a>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
										<!-- imgs-zoom-area end -->
										<!-- single-product-info start -->
										<div class="col-md-7">
											<div class="single-product-info">
												<tr th:each="deal : ${deal}">
													<a th:text="${deal.dlNo}"></a>
													<!-- 게시글번호  -->
													<h3 class="text-black-1">
														<a th:text="${deal.ntslId}">판매자아이디</a>
													</h3>
													<h6 class="brand-name-2">
														<a th:text="${deal.area}">거래지역</a>
													</h6>
													<button type="button" class="btnInfo" onClick="seller()">판매자정보더보기</button>
													<div class="f-right"></div>
													<!-- hr -->
													<hr>
													<h3 th:text="${deal.dlTtl}" class="text-black-1">뽀로로
														인형 팝니다</h3>

													<h6 th:text="${deal.dlYmd}" class="brand-name-2">2일전</h6>
													<h6 class="brand-name-2 f-right">#생활잡화 #인형 #아기용품</h6>
													<h6 th:text="${deal.ctgry}" class="brand-name-2">생활용품잡화</h6>
													<h6 th:text="${deal.stts}" class="brand-name-2">판매상태</h6>
												</tr>
											</div>
											<!-- single-product-tab -->
											<div class="single-product-tab reviews-tab">
												<ul class="nav mb-20">
													<li><a class="active" href="#description"
														data-bs-toggle="tab">상품설명</a></li>
													<li><a href="#information" data-bs-toggle="tab">시세</a></li>
													<li><a href="#map" data-bs-toggle="tab">추천거리</a></li>
													<li><a href="#reviews" data-bs-toggle="tab">
															판매자의 다른 판매상품</a></li>
												</ul>
												
												<div class="tab-content" th:each="deal : ${deal}">
													<div role="tabpanel" class="tab-pane active show"
														id="description">
														<p th:text="${deal.dlCn}"></p>
													</div>
													<div role="tabpanel" class="tab-pane" id="information">
														<p>시세조회가 들어갈 그래프 자리입니다</p>
														<p>조회결과가 없다면 '조회 결과가 없습니다' 메세지를 호출합니다</p>
														<div style="width:100%;height:350px;">
															<!--차트가 그려질 부분-->
															<canvas id="myChart"></canvas>
														</div>
														
													</div>
													<div role="tabpanel" class="tab-pane" id="map" style="width:100%;height:350px;">
													<p>추천지도 선으로 연결 기능</p>
														
													</div>
													
													<!-- 판매자의 다른 판매상품-->
													<div role="tabpanel" class="tab-pane" id="reviews">
														<div class="reviews-tab-desc">
														<input type="hidden" name="page" value="1">
<!-- 														페이지번호관련  -->
														<div align="center">
															<a
																th:each="num : *{#numbers.sequence(paging.startPage, paging.endPage)}"
																th:href="|javascript:gopage(${num})|"
																th:class="${paging.page}==${num} ? 'active'"> [[${num}]]</a>
														</div>
														<form name="frmSearch" align="center">											
															<div class="media mt-30" th:each="l : ${list}">
																<div class="media-left">
																	<a href="#"><img class="media-object"
																		th:src="${l.atchNm}"
																		style="width: 75px; height: 75px;"></a>
																</div>
																<div class="media-body">
																	<div class="clearfix">
																		<div class="name-commenter f-left">
																			<h6 class="media-heading">
																				<a th:text="${l.dlTtl}" 
																					th:href="@{/dealdetail/{dlNo}(dlNo=${l.dlNo})}">타이틀자리</a>
																			</h6>
																			<p class="mb-10" th:text="${l.dlYmd}">27 Jun,
																				2022 at 2:30pm</p>
																		</div>
																		<div class="f-right">
																			<ul class="reply-delate">
																				<li><a th:text="${l.stts}">판매상태</a></li>

																			</ul>
																		</div>
																	</div>
																	<p class="mb-0" th:text="${l.dlCn}">상품 상세 설명 넣기</p>
																</div>
															</div>
															</form>
														</div>
													</div>
													
												</div>
											</div>
										</div>
										<!--  hr -->
										<hr>
										<!-- single-pro-color-rating -->
										<div class="single-pro-color-rating clearfix">
											<div class="sin-pro-color">
												<ul class="nav mb-20">
													<li><h6 class="brand-name-2">찜 3</h6></li>&nbsp;&nbsp;
													<li><h6 class="brand-name-2">채팅 4</h6></li>&nbsp;&nbsp;
													<li><h6 class="brand-name-2">조회수</h6></li>
												</ul>
											</div>
											</tr>
										</div>
										<!-- hr -->
										<hr>
										<!-- plus-minus-pro-action -->
										<div class="plus-minus-pro-action">

											<div class="sin-pro-action f-right">
												<ul class="action-button">
													
													<li><button class="submit-btn-1 mt-30 btn-hover-1"
															type="button" onclick="updateform()"
															th:if="${session.userId == deal.ntslId}">수정하기</button></li>
													<li><button class="submit-btn-1 mt-30 btn-hover-1"
															type="submit" th:if="${session.userId == deal.ntslId}"
															onclick="deleteDeal()">삭제하기</button></li>
													<li th:each="d : ${deal}">
															<button class="submit-btn-1 mt-30 btn-hover-1"
															type="submit" 
															 th:if="${session.userId != deal.ntslId}" 
															th:onclick="|location.href='@{/my/dealReview/{dlNo}(dlNo=${d.dlNo})}'|"
															>구매+리뷰하기</button>
													</li>
													<li><button class="submit-btn-1 mt-30 btn-hover-1"
															type="submit">신고하기</button></li>
												</ul>
											</div>
										</div>
									</div>
								</div>
								<!-- single-product-info end -->
							</div>
						</div>
						<!-- single-product-area end -->
					</div>
				</div>
			</div>
		    
	<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=92ef13260c35124bc9d51f2c5e63044b&libraries=services">
			 var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
			     mapOption = { 
			         center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
			         level: 3 // 지도의 확대 레벨
			     };

			 // 지도를 표시할 div와  지도 옵션으로 지도를 생성합니다
			 var map = new kakao.maps.Map(mapContainer, mapOption); 
	 </script>
	 
	<script type="text/javascript">
    var context = document
        .getElementById('myChart')
        .getContext('2d');
    var myChart = new Chart(context, {
        type: 'bar', // 차트의 형태
        data: { // 차트에 들어갈 데이터
            labels: [
                //x 축
                '1월','2월','3월'
            ],
            datasets: [
                { //데이터
                    label: 'test1', //차트 제목
                    fill: false, // line 형태일 때, 선 안쪽을 채우는지 안채우는지
                    data: [
                        21,19,30 //x축 label에 대응되는 데이터 값 : avg 값 넣으면됨
                    ],
                    backgroundColor: [
                        //색상
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(54, 162, 235, 0.2)',
                        'rgba(255, 206, 86, 0.2)'
                    ],
                    borderColor: [
                        //경계선 색상
                        'rgba(255, 99, 132, 1)',
                        'rgba(54, 162, 235, 1)',
                        'rgba(255, 206, 86, 1)'
                       
                    ],
                    borderWidth: 1 //경계선 굵기
                }
            ]
        },
        options: {
            scales: {
                yAxes: [
                    {
                        ticks: {
                            beginAtZero: true
                        }
                    }
                ]
            }
        }
    });
</script>
</body>
</html>
	</script>
	</div>



</body>

</html>