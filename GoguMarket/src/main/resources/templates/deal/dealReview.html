<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://ultraq.net/thymeleaf/layout"
	layout:decorate="~{layouts/layout}">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>ê±°ë˜í›„ê¸°</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
@font-face {
	font-family: 'S-CoreDream-3Light';
	src:
		url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_six@1.2/S-CoreDream-3Light.woff')
		format('woff');
	font-weight: normal;
	font-style: normal;
}

* {
	font-family: 'S-CoreDream-3Light';
}

.message-box input[type=text], textarea {
	width: 70%;
}

.message-box label {
	width: 25%;
}

#reviewFrm span {
	font-weight: bold;
	color:#C04A82;
}
</style>
</head>
<body class="wide-layout">
	<div layout:fragment="content">

		<!-- MESSAGE BOX SECTION START -->
		<div class="message-box-section mb-80">
			<div class="container">
				<div class="row">
					<div class="col-lg-12" style="width: 70%">
						<div class="message-box box-shadow white-bg">


							<form id="reviewFrm" method="post" onsubmit="return false">
								<input type="hidden" name="userId" id="userId" th:value=${session.userId}>
								<input type="hidden" name="pstSe" id="pstSe">
								<input type="hidden" name="rvYn" id="rvYn">
								<input type="hidden" name="dlNo" id="dlNo" th:value="${deal.dlNo}">

								<div class="row">
									<div class="col-lg-12">
										<h4 class="blog-section-title border-left mb-30">ê±°ë˜í›„ê¸°ë“±ë¡</h4>
									</div>
								</div>


								<!-- í›„ê¸°íˆ¬í‘œí•­ëª© rv_vote -->
								<div class="col-lg-12">
									<label for="reviewlike" style="width:400px;">ğŸ¶<span>[[${ntslInfo.nickNm}]]</span>ë‹˜ê³¼ ê±°ë˜í•˜ë©° ì¢‹ì•˜ë˜
										ì ì„ ì„ íƒí•´ì£¼ì„¸ìš”
									</label>
								</div>
								<br>
								<div class="mb-10">
									<input type="checkbox" id="1" name="vtList" style="margin:auto;"> 
									<label for="rvvtCn"  style="width:400px;">ì œê°€ ìˆëŠ” ê³³ ê¹Œì§€ ì™€ì„œ ê±°ë˜í–ˆì–´ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="2" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ì¹œì ˆí•˜ê³  ë§¤ë„ˆê°€ ì¢‹ì•„ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="3" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ì‹œê°„ ì•½ì†ì„ ì˜ ì§€ì¼œìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="4" name="vtList" style="margin:auto;"> <label
										for="rvvtCn"  style="width:400px;">ì‘ë‹µì´ ë¹¨ë¼ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="5" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ìƒí’ˆìƒíƒœê°€ ì„¤ëª…í•œ ê²ƒê³¼ ê°™ì•„ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="6" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ì¢‹ì€ ìƒí’ˆì„ ì €ë ´í•˜ê²Œ íŒë§¤í•´ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="7" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ìƒí’ˆ ì„¤ëª…ì´ ìì„¸í•´ìš”</label>
								</div>
								<div  class="mb-10">
									<input type="checkbox" id="8" name="vtList" style="margin:auto;"> <label
										for="rvvtCn" style="width:400px;">ë¬´ë£Œë‚˜ëˆ”ì„ í•´ì¤¬ì–´ìš”</label>
								</div>
								<hr>
								<div class="col-lg-12">
									<label for="reviewthanks" style="width:400px;padding-bottom:10px">ğŸ¶<span>[[${ntslInfo.nickNm}]]</span>ë‹˜ì—ê²Œ ê°ì‚¬ì˜ ì¸ì‚¬ë¥¼
										ë‚¨ê²¨ë³´ì„¸ìš”!
									</label> <br>
									<textarea class="custom-textarea" name="rvCn" id="rvCn"
										placeholder="í›„ê¸° ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” :D"></textarea>
								</div>
								<br>
								<!-- â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ì²¨ë¶€íŒŒì¼ì½”ë„ˆ â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  -->
								<!-- 				<div class="col-lg-10" id="inputFile"> -->
								<!-- 					<label for="files">ğŸ¶ë¦¬ë·°ì‚¬ì§„</label>  -->
								<!-- 					<input type="file" id="files" placeholder="ì²¨ë¶€íŒŒì¼" multiple="multiple"> -->
								<!-- 					<br> -->
								<!-- 					<div id="fileList"> -->
								<!-- 						<div id="uploadFileList" data-placeholder='ğŸ¶ì²¨ë¶€íŒŒì¼ì´ ì—†ìŠµë‹ˆë‹¤ğŸŒ³'  -->
								<!-- 							 class="message-box box-shadow white-bg"></div> -->
								<!-- 					</div> -->
								<!-- 				</div> -->

								<input class="submit-btn-1 mt-30 btn-hover-1" type="submit"
									id="btnSave" role="button" value="ë“±ë¡í•˜ê¸°" style="background-color:#C04A82;">
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>

		<script th:inline="javascript">
			//==============================================================================
			//âœ… DOM ê·¸ë¦¬ë©´ì„œ ì‹¤í–‰ë˜ëŠ” í•¨ìˆ˜ (== document.onload())
			$(function() {
				$("#btnSave").on("click", function() {
					submitForm();
				});
			});

			//ğŸ“Œ	 ê³µí†µìœ¼ë¡œ ì“°ì¼ ë³€ìˆ˜ ì„ ì–¸(ì „ì—­ë³€ìˆ˜ var)
			var fileCount = 0; //í˜„ì¬ ì²¨ë¶€íŒŒì¼ ê°œìˆ˜
			var totalCount = 3; // ì²¨ë¶€ ê°€ëŠ¥í•œ íŒŒì¼ ê°œìˆ˜
			var fileNum = 0; //ì²¨ë¶€íŒŒì¼ ì¸ë±ìŠ¤
			var inputFileList = new Array(); // insert íŒŒì¼ ë°°ì—´
			var deleteFileList = new Array(); // delete íŒŒì¼ ë°°ì—´
			var isSubmitOk = true;

			var img_style = 'width:100px;height:100px;z-index:none'; // ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ ì†ì„±
			
			function submitForm() {

				$('#pstSe').val("DE"); // ì¤‘ê³ ê±°ë˜ ë¶„ë¥˜ë¡œ ëŠ˜ ë“¤ì–´ê°€ë„ë¡
				$('#rvYn').val("N");   // ê¸€ìˆ¨ê¹€ì—¬ë¶€. ì¤‘ê³ ê±°ë˜ì—ì„  ì•ˆì“°ë¯€ë¡œ í•­ìƒ N
				isSubmitOk = true;
				
				//rvvtCnë‚´ìš© ì²´í¬í‘œì‹œë³„ ì‚½ì… valueëŠ” ê³µí†µì½”ë“œ010ë²ˆì˜ 1~8ë²ˆ
				if($('#1').is(":checked")){
				 $('#1').val("1")  //#ìœ¼ë¡œ ìë¥¼ë¼ê³  ë„£ì–´ë†“ìŒ
				 }
				 if($('#2').is(":checked")){
				 $('#2').val("2")
				 } 
				 if($('#3').is(":checked")){
				 $('#3').val("3")
				 } 
				 if($('#4').is(":checked")){
				 $('#4').val("4")
				 }
				 if($('#5').is(":checked")){
				 $('#5').val("5")
				 } 
				 if($('#6').is(":checked")){
				 $('#6').val("6")
				 } 
				 if($('#7').is(":checked")){
				 $('#7').val("7")
				 } 
				 if($('#8').is(":checked")){
				 $('#8').val("8")
				 } 
				 
				//submit ì „ ì²´í¬í•˜ê¸°
				if (submitCheck()) {
					// â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ì£¼ì˜3 â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
					var formData = new FormData($("#reviewFrm")[0]);
					// â– â– â– â†‘ ì£¼ì˜1ì—ì„œ ì§€ì •í•œ í¼ id ì ì–´ì£¼ì„¸ìš” â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 

					/* formData.append("deleteFiles", deleteFileList);
					
					for (var i = 0; i < inputFileList.length; i++) {
						if (!inputFileList[i].is_delete) {
							formData.append("files", inputFileList[i]);
						}
					} */

					// â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â–  ì•„ì‘ìŠ¤ë¶€ë¶„ â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– â– 
					$.ajax({
						url : "/my/dealReviewsubmit",
						type : "POST",
						data : formData,
						processData : false,
						contentType : false,
						success : function(result) {
							console.log(result)
							alert("[ì‘ì„± ì™„ë£Œ]	ë¦¬ë·° ì‘ì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤ :D");
							location.href = "/my/myReview";
						},
						error : function(err) {
							alert("[ì‘ì„± ì‹¤íŒ¨] ë¦¬ë·° ì‘ì„±ì„ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤. :("); 
						}
					});
				}
			}

			// â– â– â– â†‘ â‘ url â‘¡alert ë‚´ìš© â‘¢success > location.href ê²½ë¡œ ë°”ê¿”ì£¼ì„¸ìš” â– â– â– â– â– â– â– â– â– â– â– â– â– â– 

			function submitCheck() {
				//4. ê¸€ë‚´ìš© ì‘ì„± ì—¬ë¶€
				if ($("#rvCn").val() == "") {
					$("#rvCn").focus();
					isSubmitOk = false;
				}
				return isSubmitOk;
			}
		</script>
	</div>
</body>
</html>